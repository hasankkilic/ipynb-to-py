<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>tool-convert – IPYNB to Python Converter</title>

    <!-- Senin CSS’in (değiştirmiyoruz) -->
    <link rel="stylesheet" href="styles.css" />
</head>

<body>

<!-- NAVBAR (dokunmadım) -->
<header class="navbar">
    <div class="nav-inner">
        <a href="index.html" class="nav-logo">
            <div class="nav-logo-mark"></div>
            <span class="nav-logo-text">tool-convert</span>
        </a>
        <nav class="nav-links">
            <a href="index.html" class="nav-link active">Home</a>
            <a href="contact.html" class="nav-link">Contact</a>
        </nav>
    </div>
</header>


<!-- ANA SAYFA -->
<main class="page">

    <!-- ÜST BAŞLIK -->
    <section style="margin-bottom: 30px;">
        <h1 class="page-title">IPYNB to Python Converter</h1>
        <p class="page-subtitle">
            Jupyter Notebook (.ipynb) dosyalarını saniyeler içinde saf Python (.py) formatına dönüştürün.
        </p>
    </section>

    <!-- 3 TOOL KARTI -->
    <section>
        <h2 style="font-size: 20px; margin-bottom: 10px;">Converters</h2>

        <div class="tool-grid">

            <!-- ÇALIŞAN IPYNB → PY -->
            <article class="tool-card">
                <h3 class="tool-title">IPYNB to Python</h3>
                <p class="tool-desc">
                    Notebook içindeki tüm kod hücrelerini toplayıp .py dosyasına dönüştürür.
                </p>
                <button id="open-ipynb-tool" class="btn btn-primary">
                    Open tool
                </button>
            </article>

            <!-- SOON TOOL 1 -->
            <article class="tool-card">
                <h3 class="tool-title">PY to IPYNB</h3>
                <p class="tool-desc">
                    <strong>Soon:</strong> Python → Notebook dönüştürücü.
                </p>
                <button class="btn" disabled>Soon</button>
            </article>

            <!-- SOON TOOL 2 -->
            <article class="tool-card">
                <h3 class="tool-title">JSON Beautifier</h3>
                <p class="tool-desc">
                    <strong>Soon:</strong> JSON formatlama aracı.
                </p>
                <button class="btn" disabled>Soon</button>
            </article>

        </div>
    </section>


    <!-- AÇILAN DÖNÜŞTÜRÜCÜ PANELİ -->
    <section id="ipynb-converter-panel" class="hidden" style="margin-top: 40px;">

        <h2 class="page-title" style="font-size: 24px;">
            IPYNB to Python Converter
        </h2>

        <p class="page-subtitle" style="margin-bottom: 20px;">
            Aşağıdaki alana bir <strong>.ipynb</strong> dosyasını sürükleyip bırakın veya tıklayıp seçin.
        </p>

        <!-- DRAG & DROP ALANI -->
        <div id="drop-area" style="
            border: 2px dashed #d0d0d0;
            padding: 35px;
            border-radius: 10px;
            text-align: center;
            cursor: pointer;
        ">
            <input type="file" id="file-input" accept=".ipynb" style="display: none;" />
            <p style="font-size: 17px; margin-bottom: 5px;">Drop your .ipynb file here</p>
            <p style="font-size: 13px; color:#666;">or click to choose a file</p>
        </div>

    </section>

    <footer class="footer" style="margin-top: 60px;">
        tool-convert · Simple tools for developers.
    </footer>

</main>



<!-- ★★★ JAVASCRIPT – DRAG & DROP + DÖNÜŞTÜRME ★★★ -->
<script>
    // Tool panel açma
    const openBtn = document.getElementById("open-ipynb-tool");
    const panel = document.getElementById("ipynb-converter-panel");

    openBtn.addEventListener("click", () => {
        panel.classList.remove("hidden");
        panel.scrollIntoView({ behavior: "smooth" });
    });

    // Drag + Drop alanı
    const dropArea = document.getElementById("drop-area");
    const fileInput = document.getElementById("file-input");

    // Tıklayınca dosya seç
    dropArea.addEventListener("click", () => fileInput.click());

    // Sürükle-bırak olayları
    ["dragenter", "dragover", "dragleave", "drop"].forEach(eventName =>
        dropArea.addEventListener(eventName, (e) => {
            e.preventDefault();
            e.stopPropagation();
        })
    );

    dropArea.addEventListener("drop", (e) => {
        const file = e.dataTransfer.files[0];
        handleFile(file);
    });

    fileInput.addEventListener("change", (e) => {
        const file = e.target.files[0];
        handleFile(file);
    });

    // IPYNB → PY DÖNÜŞTÜRÜCÜ
    function handleFile(file) {
        if (!file) return;

        if (!file.name.endsWith(".ipynb")) {
            alert("Lütfen .ipynb uzantılı bir dosya seçin.");
            return;
        }

        const reader = new FileReader();
        reader.onload = function (e) {
            try {
                const json = JSON.parse(e.target.result);
                const cells = json.cells || [];
                let py = "";

                cells.forEach(cell => {
                    if (cell.cell_type === "code") {
                        py += cell.source.join("") + "\n\n";
                    }
                });

                if (!py.trim()) {
                    alert("Notebook içinde kod hücresi bulunamadı.");
                    return;
                }

                const blob = new Blob([py], { type: "text/x-python" });
                const url = URL.createObjectURL(blob);

                const a = document.createElement("a");
                a.href = url;
                a.download = file.name.replace(".ipynb", ".py");
                a.click();
                URL.revokeObjectURL(url);

            } catch (err) {
                alert("Hatalı .ipynb dosyası veya JSON formatı.");
            }
        };

        reader.readAsText(file);
    }
</script>

</body>
</html>
